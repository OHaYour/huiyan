<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymelraf.org"
      xmlns:shiro="http://www.thymeleaf.org/thymeleaf-extras-shiro">
<head>

    <!-- SITE TITTLE -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>注册</title>

    <!-- FAVICON -->
    <!--  <link th:href="@{/img/favicon.png}" rel="shortcut icon">-->
    <!-- PLUGINS CSS STYLE -->
    <!-- <link href="plugins/jquery-ui/jquery-ui.min.css" rel="stylesheet"> -->
    <!-- Bootstrap -->
    <link rel="stylesheet" th:href="@{/plugins/bootstrap/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/plugins/bootstrap/css/bootstrap-slider.css}">
    <!-- Font Awesome -->
    <link th:href="@{/plugins/font-awesome/css/font-awesome.min.css}" rel="stylesheet">
    <!-- Owl Carousel -->
    <link th:href="@{/plugins/slick-carousel/slick/slick.css}" rel="stylesheet">
    <link th:href="@{/plugins/slick-carousel/slick/slick-theme.css}" rel="stylesheet">
    <!-- Fancy Box -->
    <link th:href="@{/plugins/fancybox/jquery.fancybox.pack.css}" rel="stylesheet">
    <link th:href="@{/plugins/jquery-nice-select/css/nice-select.css}" rel="stylesheet">
    <!-- CUSTOM CSS -->
    <link th:href="@{/css/style.css}" rel="stylesheet">

    <!--jQuery-->
    <script type="text/javascript" th:src="@{/js/jquery-3.5.1.min.js}"></script>


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script th:src="@{https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js}"></script>
    <script th:src="@{https://oss.maxcdn.com/respond/1.4.2/respond.min.js}"></script>
    <![endif]-->

    <script type="text/javascript">

        //返回注册界面2
        function regInfo2() {

            var url = location.search; //获取url的字串
            var str = url.substr(1); //获取url中"?"符后的字串
            var emails = str.split("="); //通过“=”分隔成一个emails数组,emails[0]=email,emails[1]=123123@qq.com
            var email = emails[1];

            location.href = "/user/toRegister2?email=" + email;

        }

        function regInfo3() {
            // var flag1 = false;
            // var flag2 = false;

            var url = location.search; //获取url的字串
            var str = url.substr(1); //获取url中"?"符后的字串
            var emails = str.split("="); //通过“=”分隔成一个emails数组,emails[0]=email,emails[1]=123123@qq.com
            var email = emails[1];

            var realName = $("#realName").val();
            var realId = $("#realId").val();

            // if (realName == null || realName == '') {
            //     $("#realNameTip").html("姓名不能为空");
            // } else {
            //     flag1 = true;
            // }
            //
            // if (realId == null || realId == '') {
            //     $("#realIdTip").html("身份证不能为空");
            // } else {
            //     flag2 = true;
            // }

            // if (flag1 && flag2) {
                $.ajax({
                        url: "/user/regInfo3",
                        type: "post",
                        data: {
                            'email': email,
                            'realName': realName,
                            'realId': realId
                        },
                        success: function (msg) {
                            if (msg == 'regOk') {
                                alert("恭喜你完成了所有信息的注册！")
                                location.href = "/user/toLogin";
                            }
                        }
                    }
                )
            // }

        }


    </script>

</head>

<body class="body-wrapper">


<section class="login py-5 border-top-1">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-5 col-md-8 align-item-center">
                <div class="border border">
                    <h3 class="bg-gray p-4" align="center">开始注册</h3>


                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">①验证信息</li>
                        <li class="breadcrumb-item">②详细信息</li>
                        <li class="breadcrumb-item"><a style="color: #0055ff; font-style: italic;" href="#">③实名认证</a>
                        </li>
                    </ol>


                    <form action="#">
                        <fieldset class="p-4">

                            <input type="text" placeholder="真实姓名" id="realName" class="border p-3 w-100 my-2">
                            <span id="realNameTip"></span>
                            <input type="text" placeholder="身份证" id="realId" class="border p-3 w-100 my-2">
                            <span id="realIdTip"></span>

                            <a  th:href="@{/user/toLogin}"><p style="color: #00aced">可暂时跳过完成注册</p></a>


                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                            <button type="button"
                                    class="py-2 px-3 bg-primary text-white border-0 rounded font-weight-bold"
                                    onclick="regInfo2()">上一步
                            </button>
                            <!--                                <a th:href="@{/user/toRegister2}"><input type="button" class="py-2 px-3 bg-primary text-white border-0 rounded font-weight-bold" value="上一步"/></a>-->

                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <button type="button"
                                    class="py-2 px-3 bg-success text-white border-0 rounded font-weight-bold"
                                    onclick="regInfo3()">完成
                            </button>
                            <!--                                <a th:href="@{/user/toLogin}"><input type="button" class="py-2 px-3 bg-success text-white border-0 rounded font-weight-bold" value="完成"></a>-->

                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- Footer Bottom -->
<footer class="footer-bottom">
    <!-- Container Start -->
    <div class="container">
        <div class="row">
            <div class="col-sm-6 col-12">
                <!-- Copyright -->
                <div class="copyright">
<!--                    <p>Copyright ©-->
<!--                        <script>-->
<!--                            var CurrentYear = new Date().getFullYear()-->
<!--                            document.write(CurrentYear)-->
<!--                        </script>-->
<!--                        . All Rights Reserved, theme by <a class="text-primary" href="https://themefisher.com"-->
<!--                                                           target="_blank">themefisher.com</a></p>-->
                    <p>Copyright (c) 2022 HuiYan All Rights By HuiYan.cn.</p>
                </div>
            </div>
            <div class="col-sm-6 col-12">
                <!-- Social Icons -->
                <ul class="social-media-icons text-right">
                    <li><a class="fa fa-facebook" href="https://www.facebook.com/themefisher" target="_blank"></a></li>
                    <li><a class="fa fa-twitter" href="https://www.twitter.com/themefisher" target="_blank"></a></li>
                    <li><a class="fa fa-pinterest-p" href="https://www.pinterest.com/themefisher" target="_blank"></a>
                    </li>
                    <li><a class="fa fa-vimeo" href=""></a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- Container End -->
    <!-- To Top -->
    <div class="top-to">
        <a id="top" class="" href="#"><i class="fa fa-angle-up"></i></a>
    </div>
</footer>

<!-- JAVASCRIPTS -->
<script th:src="@{/plugins/jQuery/jquery.min.js}"></script>
<script th:src="@{/plugins/bootstrap/js/popper.min.js}"></script>
<script th:src="@{/plugins/bootstrap/js/bootstrap.min.js}"></script>
<script th:src="@{/plugins/bootstrap/js/bootstrap-slider.js}"></script>
<!-- tether js -->
<script th:src="@{/plugins/tether/js/tether.min.js}"></script>
<script th:src="@{/plugins/raty/jquery.raty-fa.js}"></script>
<script th:src="@{/plugins/slick-carousel/slick/slick.min.js}"></script>
<script th:src="@{/plugins/jquery-nice-select/js/jquery.nice-select.min.js}"></script>
<script th:src="@{/plugins/fancybox/jquery.fancybox.pack.js}"></script>
<script th:src="@{/plugins/smoothscroll/SmoothScroll.min.js}"></script>
<!-- google map -->
<script th:src="@{https://maps.googleapis.com/maps/api/js?key=AIzaSyCcABaamniA6OL5YvYSpB3pFMNrXwXnLwU&libraries=places}"></script>
<script th:src="@{/plugins/google-map/gmap.js}"></script>
<script th:src="@{/js/script.js}"></script>

</body>

</html>